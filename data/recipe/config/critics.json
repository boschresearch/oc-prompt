{
  "source_path": "data/recipe/translation",
  "target_path": "data/recipe/target/critics",
  "env_files": [
    "data/env/azure_openai_gpt4o.env",
    "data/env/azure_openai_gpt4o_mini.env",
    "data/env/ollama_mistral.env"
  ],
  "max_files": "",
  "reset": false,
  "prefix_split": 1,
  "filename_pattern": "{prefix}_{english_base_dish_name}_{english_target_dish_name}",
  "prompts": [
    {
      "name": "adjust_instruction",
      "template_file": "english/critics.md",
      "input": {
        "instruction_a": {
          "source": "english_base_recipe",
          "flatten": true
        },
        "outcome_a": {
          "compose": ["english_base_dish_name", "mandarin_base_dish_name"],
          "format": "{} ({})"
        },
        "outcome_b": {
          "compose": ["english_target_dish_name", "mandarin_target_dish_name"],
          "format": "{} ({})"
        }
      },
      "output_key": "target_instruction",
      "file_suffix": "_1",
      "preserve_fields": []
    },
    {
      "name": "review_instruction",
      "template_file": "english/critics.md",
      "input": {
        "instruction": {
          "source": "target_instruction"
        },
        "outcome": {
          "compose": ["english_target_dish_name", "mandarin_target_dish_name"],
          "format": "{} ({})"
        }
      },
      "output_key": "feedback",
      "file_suffix": "_2",
      "preserve_fields": []
    },
    {
      "name": "revise_instruction_on_feedback",
      "template_file": "english/critics.md",
      "input": {
        "feedback": {
          "source": "feedback"
        },
        "outcome_b": {
          "compose": ["english_target_dish_name", "mandarin_target_dish_name"],
          "format": "{} ({})"
        },
        "instruction_a": {
          "source": "english_base_recipe"
        },
        "instruction_b": {
          "source": "target_instruction"
        }
      },
      "output_key": "english_target_recipe",
      "file_suffix": "",
      "preserve_fields": [
        "english_base_dish_name",
        "mandarin_base_dish_name",
        "english_base_recipe",
        "english_target_dish_name",
        "mandarin_target_dish_name"
      ]
    }
  ]
}
